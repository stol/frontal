!function(t,e){for(var n in e)t[n]=e[n]}(window,function(t){function e(a){if(n[a])return n[a].exports;var r=n[a]={i:a,l:!1,exports:{}};return t[a].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,a){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:a})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=3)}([,,,function(t,e,n){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.Frontal=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}(),o=n(4),i=n(5);e.Frontal=function(){function t(){a(this,t)}return r(t,null,[{key:"listen",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];i(document,'[data-f-ajaxify]:not(form), [type="submit"]',"click",t.handleEvent.bind(this)),i(document,"[data-f-ajaxify]","submit",t.handleEvent.bind(this)),i(document,"[data-f-ajaxify]","mouseenter",t.handleEvent.bind(this)),t.catchUp()}},{key:"catchUp",value:function(){document.querySelectorAll("[data-f-register]").forEach(function(e){t.ajaxify(e.dataset.fRegister,e,e.dataset.fMethod)})}},{key:"handleEvent",value:function(e){if((!e.target.matches('[type="submit"]')||e.target.closest("form[data-f-ajaxify]"))&&("mouseenter"!==e.type||e.target.dataset.fHover)){var n=e.target.dataset.fAjaxify||null,a=e.target.dataset.fHref||e.target.getAttribute("href")||e.target.getAttribute("action"),r=(e.target.dataset.fLoading,e.target.dataset.fUniq||null),i=e.target.dataset.fConfirm||null,s=e.target.dataset.fStop||null,u=e.target.dataset.fToggle||null,c=e.target.dataset.fMethod||null,l=e.target.closest("form[data-f-ajaxify]");if(e.target.matches("[type=submit]")&&(a=a||l.getAttribute("action"),n=l.dataset.fAjaxify),a){if("0"===n)return void e.preventDefault();if(s)return void e.preventDefault();if(i&&!window.confirm(i))return void e.preventDefault();if(e.target.matches('[type="submit"]')){var f=document.createElement("input");return f.type="hidden",f.classList.add("js-injected"),f.name=node.name,f.value=node.value,l.appendChild(f),void e.target.classList.add("js-loading")}c=e.target.matches("form")?"post":c||"get",e.target.classList.add("js-loading"),e.target.dataset.fAjaxify=0;var d={};e.target.matches("form")&&(d=new FormData(e.target));var p=function(t){e.target.matches("form")&&u&&t.success&&(e.target.querySelector('[type="submit"]').dataset.fStop="")},v=function(n){t.handleResponse(n.responseText,e.target),p(n)},g=function(n){t.handleResponse(n.responseJSON,e.target),p(n.responseJSON)},m=function(){e.target.dataset.fAjaxify=r?null:1,e.target.matches("form")&&e.target.querySelector(".js-injected")&&e.target.querySelector(".js-injected").remove(),e.target.classList.remove("js-loading"),"mouseenter"===e.type&&(0,o.trigger)(e.target,"mouseenter")};return e.preventDefault(),new Promise(function(t,e){var n=new XMLHttpRequest;n.open(c,a),n.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.withCredentials=!0,n.onload=function(){200===n.status?t(n):e(n)},n.onerror=function(){e(n)},d.append("__ajax__",1),n.send(d)}).then(v).catch(g).then(m)}}}},{key:"handleResponse",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if("string"==typeof t&&(t=JSON.parse(t)),void 0!==t.actions){for(var n=Array.isArray(t.actions)?t.actions:[t.actions],a=null,r=null,i=0;i<n.length;i++)r=n[i],"this"===r.selector?a=e:r.selector&&(a=document.querySelector(r.selector)),void 0!==FrontalCallbacks[r.method]&&(a=FrontalCallbacks[r.method].apply(a,r.args));(0,o.triggerCustomEvent)(document,"contentchange")}}},{key:"ajaxify",value:function(e,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET";return new Promise(function(t,n){var r=new XMLHttpRequest;r.open(a,e),r.setRequestHeader("X-Requested-With","XMLHttpRequest"),r.withCredentials=!0,r.onload=function(){200===r.status?t(r):n(r)},r.onerror=function(){n(r)},r.send()}).then(function(e){t.handleResponse(e.statusText,n)})}}]),t}()},function(t,e,n){"use strict";function a(t,e){var n=document.createEvent("HTMLEvents");n.initEvent(e,!0,!1),t.dispatchEvent(n)}function r(t,e,n){var a=void 0;window.CustomEvent?a=new CustomEvent(e,n):(a=document.createEvent("CustomEvent"),a.initCustomEvent(e,!0,!0,n)),t.dispatchEvent(a)}Object.defineProperty(e,"__esModule",{value:!0}),e.trigger=a,e.triggerCustomEvent=r},function(t,e,n){function a(t,e,n,a,r){var i=o.apply(this,arguments);return t.addEventListener(n,i,r),{destroy:function(){t.removeEventListener(n,i,r)}}}function r(t,e,n,r,o){return"function"==typeof t.addEventListener?a.apply(null,arguments):"function"==typeof n?a.bind(null,document).apply(null,arguments):("string"==typeof t&&(t=document.querySelectorAll(t)),Array.prototype.map.call(t,function(t){return a(t,e,n,r,o)}))}function o(t,e,n,a){return function(n){n.delegateTarget=i(n.target,e),n.delegateTarget&&a.call(t,n)}}var i=n(6);t.exports=r},function(t,e){function n(t,e){for(;t&&t.nodeType!==a;){if("function"==typeof t.matches&&t.matches(e))return t;t=t.parentNode}}var a=9;if("undefined"!=typeof Element&&!Element.prototype.matches){var r=Element.prototype;r.matches=r.matchesSelector||r.mozMatchesSelector||r.msMatchesSelector||r.oMatchesSelector||r.webkitMatchesSelector}t.exports=n}]));